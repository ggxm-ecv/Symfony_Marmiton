{% extends 'base.html.twig' %}

{% block title %}Recipe{% endblock %}

{% block body %}
    <h1>Recipe</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ recipe.id }}</td>
            </tr>
            <tr>
                <th>Name</th>
                <td>{{ recipe.name }}</td>
            </tr>
            <tr>
                <th>PreparationTime</th>
                <td>{{ recipe.preparationTime ? recipe.preparationTime|date('H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>CookingTime</th>
                <td>{{ recipe.cookingTime ? recipe.cookingTime|date('H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>IngredientList</th>
                <td>{{ recipe.ingredientList ? recipe.ingredientList|join(', ') : '' }}</td>
            </tr>
            <tr>
                <th>Steps</th>
                <td>{{ recipe.steps ? recipe.steps|join(', ') : '' }}</td>
            </tr>
            <tr>
                <th>AverageRate</th>
                <td>{{ recipe.averageRate }}</td>
            </tr>
            <tr>
                <th>Rates</th>
                <td>
                {% for rate in recipe.rates %}
                    {{ rate.score }} / 
                {% else %}
                    no rate found
                {% endfor %}
                </td>
            </tr>
            <tr>
                <th>Add Rate</th>
                <td>
                    {# form to add rate #}
                    {{ form_start(form1) }}
                        {{ form_row(form1.score) }}
                        <button class="btn">{{ button_label|default('Save') }}</button>
                    {{ form_end(form1) }}
                </td>
            </tr>
            <tr>
                <th>Comments</th>
                <td>
                    {% for comment in recipe.comments %}
                        <tr>
                            <td>{{ comment.title }}</td>
                            <td>{{ comment.description }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td>no records found</td>
                        </tr>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th>Add Comment</th>
                <td>
                    {# form to add comment #}
                    {{ form_start(form2) }}
                        {{ form_row(form2.title) }}
                        {{ form_row(form2.description) }}
                        <button class="btn">{{ button_label|default('Save') }}</button>
                    {{ form_end(form2) }}
                </td>
            </tr>
        </tbody>
    </table>

    <a href="{{ path('recipe_index') }}">back to list</a>

    <a href="{{ path('recipe_edit', {'id': recipe.id}) }}">edit</a>

    {{ include('recipe/_delete_form.html.twig') }}
{% endblock %}
